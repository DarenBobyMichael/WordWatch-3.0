<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Video Upload - Offensiveness Prediction</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/video.css') }}">
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            document.querySelectorAll('.sidebar ul li').forEach((item, index) => {
                item.style.animationDelay = `${index * 0.1}s`;
            });
        });

        function logout() {
            window.location.href = "/";
        }

        function previewVideo() {
            const videoFile = document.getElementById('video-file').files[0];
            const videoPreview = document.getElementById('video-preview');
            const videoURL = URL.createObjectURL(videoFile);
            videoPreview.src = videoURL;
            videoPreview.style.display = 'block'; // Show the video preview container
        }
    </script>
</head>
<body>
    <div class="top-right-corner">
        <div class="user-info">
            <span class="username">Welcome, {{ Name }}</span>
        </div>
        <button onclick="logout()" class="logout-button">Logout</button>
    </div>

    <div id="video-container">
        <video autoplay muted loop>
            <source src="static/videos/bgvideo.mp4" type="video/mp4">
            Your browser does not support the video tag.
        </video>
    </div>

    <div class="sidebar">
        <h3>Input History</h3>
        <ul>
            <!-- Your sidebar content here -->
        </ul>
        <!-- Video preview in the sidebar -->
        <!-- <div class="preview-container">
            <h3>Video Preview</h3>
            <video controls id="video-preview-sidebar">
                <source src="#" type="video/mp4">
                Your browser does not support the video tag.
            </video>
        </div> -->
    </div>
    
    <div class="container">
        <h2 style="padding-top: 100px;">Upload a video for offensiveness prediction</h2>
        <form id="upload-form" enctype="multipart/form-data">
            <input type="file" id="video-file" accept="video/mp4">
            <label for="video-file" class="upload-label">Choose a video file</label>
            <button type="button" style="margin-top: 200px; margin-bottom: 60px;" onclick="previewVideo()">Preview</button>
            <div id="preview-container">
                <video controls id="video-preview" style="display: none; width: 500px; height: 500px;">
                    <source src="#" type="video/mp4">
                    Your browser does not support the video tag.
                </video>
            </div>  
            <button type="submit">Submit</button>
            <h2>Predicted Text:</h2>
            <div class="output">
                <p>{{ text_content }}</p>
            </div>
            <h2>Offensiveness Prediction:</h2>
            <div class="output">
                <p class="emoji">{% if off_rating == 1 %}ðŸš¨{% else %}âœ…{% endif %}</p>
            </div>
            
        </form>
    
        <!-- Video preview section inside the container -->
         

     <!--  <div class="output">
            <h2>Predicted Text:</h2>
            <p>{{ text_content }}</p>
            <h2>Offensiveness Prediction:</h2>
            <p class="emoji">{% if off_rating == 1 %}ðŸš¨{% else %}âœ…{% endif %}</p>
        </div>  --> 
    </div>
</body>
</html>